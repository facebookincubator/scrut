"use strict";(self.webpackChunkstaticdocs_starter=self.webpackChunkstaticdocs_starter||[]).push([[5826],{14635:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"reference/fundamentals/environment-variables","title":"Environment Variables","description":"Scrut sets some environment variables when executing tests. They are set just before executing individual test cases in a test document. While they can be overwritten within a test case, they are set anew for each test case.","source":"@site/docs/reference/fundamentals/environment-variables.md","sourceDirName":"reference/fundamentals","slug":"/reference/fundamentals/environment-variables","permalink":"/scrut/docs/reference/fundamentals/environment-variables","draft":false,"unlisted":false,"editUrl":"https://www.internalfb.com/code/fbsource/fbcode/clifoundation/scrut/website/docs/reference/fundamentals/environment-variables.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Scrut in GitHub Action","permalink":"/scrut/docs/integration/github-action"},"next":{"title":"Inline Configuration","permalink":"/scrut/docs/reference/fundamentals/inline-configuration"}}');var s=t(74848),r=t(28453);const c={},a="Environment Variables",l={},o=[{value:"Scrut specific environment variables",id:"scrut-specific-environment-variables",level:2},{value:"Common (linux) environment variables",id:"common-linux-environment-variables",level:2},{value:"(Optional) Cram environment variables",id:"optional-cram-environment-variables",level:2},{value:"Controlling Environment Variables",id:"controlling-environment-variables",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"environment-variables",children:"Environment Variables"})}),"\n",(0,s.jsxs)(n.p,{children:["Scrut sets some environment variables when executing tests. They are set just before executing individual ",(0,s.jsx)(n.a,{href:"/docs/reference/fundamentals/test-case/",children:"test cases"})," in a test document. While they can be overwritten within a ",(0,s.jsx)(n.a,{href:"/docs/reference/fundamentals/test-case/",children:"test case"}),", they are set anew for each ",(0,s.jsx)(n.a,{href:"/docs/reference/fundamentals/test-case/",children:"test case"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"scrut-specific-environment-variables",children:"Scrut specific environment variables"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TESTDIR"}),": absolute path of the directory where the document that contains the test that is currently being executed is in"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TESTFILE"}),": name of the ",(0,s.jsx)(n.a,{href:"/docs/reference/fundamentals/test-document/",children:"test document"})," that contains the test that is currently being executed"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TESTSHELL"}),": shell that in which the test is being executed in (default ",(0,s.jsx)(n.code,{children:"/bin/bash"}),", see ",(0,s.jsx)(n.code,{children:"--shell"})," flag on commands)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TMPDIR"}),": absolute path to a temporary directory that will be cleaned up after the test is executed. This directory is shared in between all executed tests across all test documents. Tools like ",(0,s.jsx)(n.code,{children:"mktemp"})," will make use of ",(0,s.jsx)(n.code,{children:"TMPDIR"})," automatically."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"SCRUT_TEST"}),": path to the test document and the line number, separated by a colon (e.g. ",(0,s.jsx)(n.code,{children:"some/test.md:123"}),"). ",(0,s.jsx)(n.em,{children:"This variable is recommend to use when deciding whether an execution is within Scrut."})]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Use the ",(0,s.jsx)(n.code,{children:"SCRUT_TEST"})," variable to decide whether an execution is within Scrut. This is useful when you want to be aware of that fact from within your CLI during test execution."]})}),"\n",(0,s.jsx)(n.h2,{id:"common-linux-environment-variables",children:"Common (linux) environment variables"}),"\n",(0,s.jsx)(n.p,{children:"Scrut sets the following environment variables to their default values:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CDPATH"}),": empty"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"COLUMNS"}),": ",(0,s.jsx)(n.code,{children:"80"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GREP_OPTIONS"}),": empty"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"LANG"}),": ",(0,s.jsx)(n.code,{children:"C"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"LANGUAGE"}),": ",(0,s.jsx)(n.code,{children:"C"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"LC_ALL"}),": ",(0,s.jsx)(n.code,{children:"C"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"SHELL"}),": Same as ",(0,s.jsx)(n.code,{children:"TESTSHELL"}),", see above"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TZ"}),": ",(0,s.jsx)(n.code,{children:"GMT"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"optional-cram-environment-variables",children:"(Optional) Cram environment variables"}),"\n",(0,s.jsxs)(n.p,{children:["When using the ",(0,s.jsx)(n.code,{children:"--cram-compat"})," flag, or when a Cram ",(0,s.jsx)(n.code,{children:".t"})," test document is being executed, the following additional environment variables will be exposed for compatibility:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"CRAMTMP"}),": if no specific working directory was provided (default), then it contains the absolute path to the temporary directory in which per-test-file directories will be created in which those test files are then executed in (",(0,s.jsx)(n.code,{children:'CRAMTMP=$(realpath "$(pwd)/..")'}),"); otherwise the path to the provided working directory"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TMP"}),": same as ",(0,s.jsx)(n.code,{children:"TMPDIR"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TEMP"}),": same as ",(0,s.jsx)(n.code,{children:"TMPDIR"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"controlling-environment-variables",children:"Controlling Environment Variables"}),"\n",(0,s.jsx)(n.p,{children:"All environment variables above are exported by Scrut for test execution. Additionally there are environment variables that can be used to control Scrut's behavior:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"SCRUT_DEFAULT_SHELL"}),": Overrides the path to the ",(0,s.jsx)(n.a,{href:"/docs/reference/fundamentals/inline-configuration/#shell",children:"default shell"})," that is used for executing ",(0,s.jsx)(n.a,{href:"/docs/reference/fundamentals/shell-expression/",children:"shell expressions"}),". This is useful when the ",(0,s.jsx)(n.code,{children:"bash"})," binary is located in a non-standard location."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>a});var i=t(96540);const s={},r=i.createContext(s);function c(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);