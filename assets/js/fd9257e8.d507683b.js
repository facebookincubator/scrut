"use strict";(self.webpackChunkstaticdocs_starter=self.webpackChunkstaticdocs_starter||[]).push([[7935],{28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var s=n(96540);const i={},c=s.createContext(i);function r(e){const t=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(c.Provider,{value:t},e.children)}},86845:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"reference/behavior/exit-codes","title":"Exit Codes","description":"The expected exit code of a shell expression in a test case can be denoted with a integer in square brackets. For example:","source":"@site/docs/reference/behavior/exit-codes.md","sourceDirName":"reference/behavior","slug":"/reference/behavior/exit-codes","permalink":"/scrut/docs/reference/behavior/exit-codes","draft":false,"unlisted":false,"editUrl":"https://www.internalfb.com/code/fbsource/fbcode/clifoundation/scrut/website/docs/reference/behavior/exit-codes.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Execution Model","permalink":"/scrut/docs/reference/behavior/execution-model"},"next":{"title":"Newline handling","permalink":"/scrut/docs/reference/behavior/newline-handling"}}');var i=n(74848),c=n(28453);const r={},o="Exit Codes",d={},a=[{value:"Skip Tests with Exit Code 80",id:"skip-tests-with-exit-code-80",level:2},{value:"Scrut Exit Code",id:"scrut-exit-code",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"exit-codes",children:"Exit Codes"})}),"\n",(0,i.jsxs)(t.p,{children:["The expected exit code of a ",(0,i.jsx)(t.a,{href:"/docs/reference/fundamentals/shell-expression/",children:"shell expression"})," in a ",(0,i.jsx)(t.a,{href:"/docs/reference/fundamentals/test-case/",children:"test case"})," can be denoted with a integer in square brackets. For example:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-markdown",metastring:'title="example.md" showLineNumbers {6}',children:"# The command is expected to end with exit code 2\n\n```scrut\n$ some-command --foo\nan expected line of output\n[2]\n```\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Unless otherwise specified an exit code of ",(0,i.jsx)(t.code,{children:"0"})," (zero) is expected. You can explicitly denote it with ",(0,i.jsx)(t.code,{children:"[0]"})," if you prefer."]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["Exit code evaluation happens before ",(0,i.jsx)(t.a,{href:"/docs/reference/fundamentals/output-expectations/",children:"output expectations"})," are evaluated. That means if the exit code fails then no output validation is attempted."]})}),"\n",(0,i.jsx)(t.h2,{id:"skip-tests-with-exit-code-80",children:"Skip Tests with Exit Code 80"}),"\n",(0,i.jsxs)(t.p,{children:["If any ",(0,i.jsx)(t.a,{href:"/docs/reference/fundamentals/test-case/",children:"test case"})," in a test file exist with exit code ",(0,i.jsx)(t.code,{children:"80"}),", then all ",(0,i.jsx)(t.a,{href:"/docs/reference/fundamentals/test-case/",children:"test case"})," in that file are skipped."]}),"\n",(0,i.jsx)(t.p,{children:"This is especially helpful for OS specific tests etc. Imagine:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-markdown",metastring:'title="example.md" showLineNumbers {4}',children:'Run tests in this file only on Mac\n\n```scrut\n$ [[ "$(uname)" == "Darwin" ]] || exit 80\n```\n'})}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["The exit code can be configured with the ",(0,i.jsxs)(t.a,{href:"/docs/reference/fundamentals/inline-configuration/",children:[(0,i.jsx)(t.code,{children:"skip_document_code"})," configuration directive"]}),"."]})}),"\n",(0,i.jsx)(t.h2,{id:"scrut-exit-code",children:"Scrut Exit Code"}),"\n",(0,i.jsx)(t.p,{children:"Scrut itself communicates the outcome of executions with exit codes. Currently three possible exit codes are used:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"0"}),": Command succeeded, all is good (",(0,i.jsx)(t.code,{children:"scrut test"}),", ",(0,i.jsx)(t.code,{children:"scrut create"}),", ",(0,i.jsx)(t.code,{children:"scrut update"}),")"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"1"}),": Command failed with error (",(0,i.jsx)(t.code,{children:"scrut test"}),", ",(0,i.jsx)(t.code,{children:"scrut create"}),", ",(0,i.jsx)(t.code,{children:"scrut update"}),")"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"50"}),": Validation failed (",(0,i.jsx)(t.code,{children:"scrut test"})," only)"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);