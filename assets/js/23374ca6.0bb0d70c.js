(self.webpackChunkstaticdocs_starter=self.webpackChunkstaticdocs_starter||[]).push([[421],{80466:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var s=n(85893),o=n(11151),i=n(47903);const r={sidebar_position:1},a="Scrut",l={id:"README",title:"Scrut",description:"Scrut is a testing toolkit for CLI applications. A tool to scrutinize terminal programs without fuzz. Heavily inspired by Cram.",source:"@site/docs/README.md",sourceDirName:".",slug:"/",permalink:"/scrut/docs/",draft:!1,unlisted:!1,editUrl:"https://www.internalfb.com/code/fbsource/fbcode/clifoundation/scrut/website/docs/README.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"Tutorial",permalink:"/scrut/docs/tutorial"}},c={},d=[{value:"Getting Started",id:"getting-started",level:2},{value:"Contribute",id:"contribute",level:2},{value:"License",id:"license",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components},{FbInternalOnly:n,OssOnly:r}=t;return n||p("FbInternalOnly",!0),r||p("OssOnly",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"scrut",children:"Scrut"}),"\n",(0,s.jsxs)(t.p,{children:["Scrut is a testing toolkit for CLI applications. A tool to scrutinize terminal programs without fuzz. Heavily inspired by ",(0,s.jsx)(t.a,{href:"https://github.com/brodie/cram",children:"Cram"}),"."]}),"\n",(0,s.jsx)(t.h1,{id:"why-though",children:"Why though?"}),"\n",(0,s.jsx)(t.p,{children:"Testing CLIs is complicated. Sure, you can (should!) write unit tests, as for any other software application, but they will (should!) only address your business logic and not test dependencies towards or interaction with the environment (command line input, environment variables, external APIs, etc)."}),"\n",(0,s.jsx)(t.p,{children:"What constitutes a CLI is not obvious or standardized. Some are small shell script, that consists of only a handful lines of code, which automate a thing that you are too lazy to do by hand more than once. Others are build upon tens of thousands of lines of code and feature multiple sub-commands that solve a range of related and complex problems. Often those large applications start out as small shell scripts and then evolve over time. You can call a program a CLI as long as it is intended to be executed from the shell."}),"\n",(0,s.jsx)(t.p,{children:"A testing framework for CLIs should address all of that."}),"\n",(0,s.jsx)(t.p,{children:"Scrut is a tool in the functional / integration / end-2-end / blackbox testing space. Tests are written in a flexible syntax that can be used to prove the behavior of any CLI - however complex and in whatever language (Rust, Java, Ruby, C++, Typescript, ...) they are written in."}),"\n",(0,s.jsx)(t.p,{children:"Scrut aims to be"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Low Threshold"}),", so that it's easy to learn and the entry barrier is very low (if you can execute commands on the terminal, you should be able to write a test)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Low Effort"}),", so that writing tests for even small CLI scripts is not (too) much overhead"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Low Maintenance"}),", so that keeping tests around and up2date is not a painful chore"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Readable"}),", so that tests can provide additional value to the reader as documentation (of the thing that is tested)"]}),"\n"]}),"\n",(0,s.jsx)(t.h1,{id:"how-then",children:"How then?"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"scrut"})," command line application executes tests of CLIs that are persisted in Markdown (",(0,s.jsx)(t.code,{children:".md"}),") or Cram (",(0,s.jsx)(t.code,{children:".t"}),") files."]}),"\n",(0,s.jsx)(t.p,{children:"A very simple test looks like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-markdown",children:"# Smoke test of the ACME CLI\n\nThis file contains a smoke test for the `acme` command line tool.\nIf it fails then things are seriously broken.\n\n## Print version\n\n```scrut\n$ acme --version > /dev/null\n```\n"})}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)(t.h2,{id:"getting-started",children:"Getting Started"}),(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"fb/",children:"Getting Started"})}),"\n"]})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsxs)(t.p,{children:["Head over to ",(0,s.jsx)(t.a,{href:"/scrut/docs/tutorial",children:"the tutorial"})," to get learn how to write your own tests."]}),(0,s.jsx)(t.h2,{id:"contribute",children:"Contribute"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:i.customFields.ossRepoUrl+"/blob/main/CONTRIBUTING.md",children:"CONTRIBUTING.md"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:i.customFields.ossRepoUrl+"/blob/main/CODE_OF_CONDUCT.md",children:"CODE_OF_CONDUCT.md"})})]}),(0,s.jsx)(t.h2,{id:"license",children:"License"}),(0,s.jsx)("ul",{children:(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:i.customFields.ossRepoUrl+"/blob/main/LICENSE",children:"LICENSE"})})})]})]})}function u(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}function p(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},47903:e=>{e.exports={customFields:{fbRepoName:"fbsource",ossRepoPath:"fbcode/clifoundation/scrut/website",ossRepoUrl:"https://github.com/facebookincubator/scrut"}}},11151:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,a:()=>r});var s=n(67294);const o={},i=s.createContext(o);function r(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);