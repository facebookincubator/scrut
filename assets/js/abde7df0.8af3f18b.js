"use strict";(self.webpackChunkstaticdocs_starter=self.webpackChunkstaticdocs_starter||[]).push([[4184],{28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>c});var s=n(96540);const r={},a=s.createContext(r);function o(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(a.Provider,{value:t},e.children)}},32830:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"reference/formats/cram-format","title":"Cram Format","description":"For new tests, prefer using the Markdown format which was introduced with two goals in mind:","source":"@site/docs/reference/formats/cram-format.md","sourceDirName":"reference/formats","slug":"/reference/formats/cram-format","permalink":"/scrut/docs/reference/formats/cram-format","draft":false,"unlisted":false,"editUrl":"https://www.internalfb.com/code/fbsource/fbcode/clifoundation/scrut/website/docs/reference/formats/cram-format.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Test Output","permalink":"/scrut/docs/reference/fundamentals/test-output"},"next":{"title":"Markdown Format","permalink":"/scrut/docs/reference/formats/markdown-format"}}');var r=n(74848),a=n(28453);const o={},c="Cram Format",i={},d=[];function l(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"cram-format",children:"Cram Format"})}),"\n",(0,r.jsxs)(t.admonition,{type:"warning",children:[(0,r.jsxs)(t.p,{children:["For new tests, prefer using the ",(0,r.jsx)(t.a,{href:"/docs/reference/formats/markdown-format/",children:"Markdown format"})," which was introduced with two goals in mind:"]}),(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Tests \u2764\ufe0f Documentation"}),": The value of tests is not only in proving behavior, but also in documenting it - and thereby also in teaching it. The Markdown format allows you to keep tests around in a way that future generations of maintainers will love you for."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Bad Spaces \ud83d\udc7e"}),": To denote an expected empty line of output in Cram format you have to provide two empty spaces ",(0,r.jsx)(t.code,{children:"\u2001\u2001"}),". This goes counter a lot of default behavior in the development toolchain. Many CI/CD tools are tuned to automatically ignore changes that only affect white spaces. Code review tools often deliberately hide white spae changes. White spaces are generally hard to see in code editors - if they are visualized at all. Breaking tests that are caused by an accidentally removed or added space cause rage quitting."]}),"\n"]}),(0,r.jsxs)(t.p,{children:["See also additional differences in the ",(0,r.jsx)(t.a,{href:"/docs/reference/behavior/execution-model/",children:"way tests are executed"}),"."]})]}),"\n",(0,r.jsxs)(t.p,{children:["The Cram document format is supported for legacy reasons. The general guidance to write ",(0,r.jsx)(t.a,{href:"/docs/reference/fundamentals/test-case/",children:"test cases"})," in Cram ",(0,r.jsx)(t.a,{href:"/docs/reference/fundamentals/test-document/",children:"test documents"})," is:"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["The first line of a ",(0,r.jsx)(t.a,{href:"/docs/reference/fundamentals/shell-expression/",children:"shell expression"})," must start with ",(0,r.jsx)(t.code,{children:"\u2001\u2001$\u2001"})," (space + space + dollar + space), any subsequent with ",(0,r.jsx)(t.code,{children:"\u2001\u2001>\u2001"})," (space + space + closing angle bracket + space).","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This is different from Markdown Scrut syntax. Be mindful of the additional spaces."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["Lines following the ",(0,r.jsx)(t.a,{href:"/docs/reference/fundamentals/shell-expression/",children:"shell expression"}),", that are also indented with two spaces, are considered ",(0,r.jsx)(t.a,{href:"/docs/reference/fundamentals/output-expectations/",children:"output expectations"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["If an ",(0,r.jsx)(t.a,{href:"/docs/reference/behavior/exit-codes/",children:"exit code"})," other than ",(0,r.jsx)(t.code,{children:"0"})," is expected, it can be denoted in square brackets ",(0,r.jsx)(t.code,{children:"[123]"})," once per ",(0,r.jsx)(t.a,{href:"/docs/reference/fundamentals/test-case/",children:"test case"})]}),"\n",(0,r.jsxs)(t.li,{children:["Note: Empty output lines (=empty ",(0,r.jsx)(t.em,{children:"shell expectations"}),") must still have two leading space characters"]}),"\n",(0,r.jsxs)(t.li,{children:["Note: A fully empty line (no leading spaces) denotes the end of the current ",(0,r.jsx)(t.a,{href:"/docs/reference/fundamentals/test-case/",children:"test case"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["If the ",(0,r.jsx)(t.a,{href:"/docs/reference/fundamentals/shell-expression/",children:"shell expression"})," is preceded by a non-empty line (that is ",(0,r.jsx)(t.em,{children:"not"})," indented) the line is considered the ",(0,r.jsx)(t.em,{children:"title"})," of the ",(0,r.jsx)(t.a,{href:"/docs/reference/fundamentals/test-case/",children:"test case"})]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Here an example:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cram",children:"This is a comment\n  $ scrut --help\n  Scrut help output\n\nAnother test case in the same document\n  $ scrut --version\n  Scrut version output\n"})}),"\n",(0,r.jsx)(t.p,{children:"Multiple tests test cases can be written in sequence without any empty lines in between:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-cram",children:"A title for the first test case\n  $ first --command\n  $ second --command\n  $ third --command\n  Output Expectation\n"})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);